<mxfile host="app.diagrams.net" modified="2025-10-19T09:53:00.000Z" agent="Draw.io" version="22.0.0" etag="system-architecture-updated" type="device">
  <diagram name="System Architecture - Spa Management" id="system-arch-diagram-v2">
    <mxGraphModel dx="1422" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="Spa Management System - Three-Tier Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="10" width="600" height="30" as="geometry" />
        </mxCell>
        
        <!-- PRESENTATION TIER CONTAINER -->
        <mxCell id="presentation-tier-box" value="PRESENTATION TIER (Client Layer)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;startSize=35;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="60" width="1300" height="200" as="geometry" />
        </mxCell>
        
        <!-- Customer Client -->
        <mxCell id="customer-client" value="&lt;b&gt;Customer Client&lt;/b&gt;&lt;br&gt;&lt;br&gt;• View Services&lt;br&gt;• Browse Catalog" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=center;verticalAlign=top;strokeWidth=2;" vertex="1" parent="presentation-tier-box">
          <mxGeometry x="50" y="60" width="250" height="120" as="geometry" />
        </mxCell>
        
        <!-- Therapist Client -->
        <mxCell id="therapist-client" value="&lt;b&gt;Therapist Client&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Service Mgmt&lt;br&gt;• Transactions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=center;verticalAlign=top;strokeWidth=2;" vertex="1" parent="presentation-tier-box">
          <mxGeometry x="350" y="60" width="250" height="120" as="geometry" />
        </mxCell>
        
        <!-- Cashier Client -->
        <mxCell id="cashier-client" value="&lt;b&gt;Cashier Client&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Payment Mgmt&lt;br&gt;• Receipt Generation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=center;verticalAlign=top;strokeWidth=2;" vertex="1" parent="presentation-tier-box">
          <mxGeometry x="650" y="60" width="250" height="120" as="geometry" />
        </mxCell>
        
        <!-- Monitor Display -->
        <mxCell id="monitor-client" value="&lt;b&gt;Monitor Display&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Real-time Status&lt;br&gt;• Snapshots" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;align=center;verticalAlign=top;strokeWidth=2;" vertex="1" parent="presentation-tier-box">
          <mxGeometry x="950" y="60" width="250" height="120" as="geometry" />
        </mxCell>
        
        <!-- Communication Protocol Label -->
        <mxCell id="comm-protocol" value="HTTP/HTTPS (Port 5000) + WebSocket (Socket.IO)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=2;fontColor=#0066CC;" vertex="1" parent="1">
          <mxGeometry x="450" y="270" width="500" height="30" as="geometry" />
        </mxCell>
        
        <!-- Arrow Presentation to Application -->
        <mxCell id="arrow-pres-app" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;endArrow=block;endFill=1;strokeColor=#6c8ebf;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="presentation-tier-box" target="application-tier-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="700" y="260" as="sourcePoint" />
            <mxPoint x="700" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- APPLICATION TIER CONTAINER -->
        <mxCell id="application-tier-box" value="APPLICATION TIER (Business Logic Layer)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;startSize=35;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="320" width="1300" height="380" as="geometry" />
        </mxCell>
        
        <!-- Flask Server -->
        <mxCell id="flask-server" value="&lt;b&gt;Flask Web Server&lt;/b&gt;&lt;br&gt;(Python 3.x / WSGI)&lt;br&gt;localhost:5000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;fontStyle=1;strokeWidth=2;" vertex="1" parent="application-tier-box">
          <mxGeometry x="450" y="60" width="400" height="70" as="geometry" />
        </mxCell>
        
        <!-- Flask Blueprints -->
        <mxCell id="flask-blueprints" value="&lt;b&gt;Flask Blueprints&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Customer&lt;br&gt;• Therapist&lt;br&gt;• Cashier&lt;br&gt;• Auth&lt;br&gt;• Monitor&lt;br&gt;• Snapshot" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="application-tier-box">
          <mxGeometry x="50" y="160" width="280" height="200" as="geometry" />
        </mxCell>
        
        <!-- Flask-SocketIO -->
        <mxCell id="flask-socketio" value="&lt;b&gt;Flask-SocketIO&lt;/b&gt;&lt;br&gt;v5.3.6&lt;br&gt;&lt;br&gt;• Threading Mode&lt;br&gt;• Real-time Events&lt;br&gt;• Broadcasting" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="application-tier-box">
          <mxGeometry x="380" y="160" width="280" height="200" as="geometry" />
        </mxCell>
        
        <!-- SQLAlchemy ORM -->
        <mxCell id="sqlalchemy-orm" value="&lt;b&gt;SQLAlchemy ORM&lt;/b&gt;&lt;br&gt;v2.0.31&lt;br&gt;&lt;br&gt;• Models&lt;br&gt;• Queries&lt;br&gt;• Transactions&lt;br&gt;• Connection Pool" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="application-tier-box">
          <mxGeometry x="710" y="160" width="280" height="200" as="geometry" />
        </mxCell>
        
        <!-- Business Logic -->
        <mxCell id="business-logic" value="&lt;b&gt;Business Logic Components&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Authentication &amp;amp; Authorization (RBAC)&lt;br&gt;• Transaction Management (ACID)&lt;br&gt;• Service &amp;amp; Payment Processing&lt;br&gt;• Real-time Event Broadcasting&lt;br&gt;• Concurrency Control (Row-Level Locking)&lt;br&gt;• Session Management" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="application-tier-box">
          <mxGeometry x="1040" y="160" width="230" height="200" as="geometry" />
        </mxCell>
        
        <!-- Arrows from Flask to components -->
        <mxCell id="arrow-flask-blueprints" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;strokeColor=#82b366;" edge="1" parent="application-tier-box" source="flask-server" target="flask-blueprints">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-flask-socketio" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;strokeColor=#82b366;" edge="1" parent="application-tier-box" source="flask-server" target="flask-socketio">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-flask-sqlalchemy" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;strokeColor=#82b366;" edge="1" parent="application-tier-box" source="flask-server" target="sqlalchemy-orm">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- SQL Protocol Label -->
        <mxCell id="sql-protocol" value="SQL Queries + Transactions (MySQL Protocol - Port 3306)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontStyle=2;fontColor=#0066CC;" vertex="1" parent="1">
          <mxGeometry x="450" y="710" width="500" height="30" as="geometry" />
        </mxCell>
        
        <!-- Arrow Application to Data -->
        <mxCell id="arrow-app-data" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;endArrow=block;endFill=1;strokeColor=#82b366;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="application-tier-box" target="data-tier-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="700" y="700" as="sourcePoint" />
            <mxPoint x="700" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- DATA TIER CONTAINER -->
        <mxCell id="data-tier-box" value="DATA TIER (Database Layer)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=1;startSize=35;strokeWidth=2;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="50" y="760" width="1300" height="400" as="geometry" />
        </mxCell>
        
        <!-- MySQL Server -->
        <mxCell id="mysql-server" value="&lt;b&gt;MySQL Database Server&lt;/b&gt;&lt;br&gt;(XAMPP MySQL v8.x)&lt;br&gt;localhost:3306" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;fontStyle=1;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="450" y="60" width="400" height="70" as="geometry" />
        </mxCell>
        
        <!-- Core Entities Row 1 -->
        <mxCell id="entity-therapist" value="&lt;b&gt;Therapist&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• username&lt;br&gt;• name&lt;br&gt;• room_no&lt;br&gt;• token" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="50" y="160" width="150" height="110" as="geometry" />
        </mxCell>
        
        <mxCell id="entity-cashier" value="&lt;b&gt;Cashier&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• username&lt;br&gt;• name&lt;br&gt;• counter&lt;br&gt;• token" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="220" y="160" width="150" height="110" as="geometry" />
        </mxCell>
        
        <mxCell id="entity-transaction" value="&lt;b&gt;Transaction&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• code&lt;br&gt;• status&lt;br&gt;• therapist&lt;br&gt;• room" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="390" y="160" width="150" height="110" as="geometry" />
        </mxCell>
        
        <mxCell id="entity-payment" value="&lt;b&gt;Payment&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• trans_id&lt;br&gt;• amount&lt;br&gt;• method&lt;br&gt;• date" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="560" y="160" width="150" height="110" as="geometry" />
        </mxCell>
        
        <mxCell id="entity-service" value="&lt;b&gt;Service&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• name&lt;br&gt;• price&lt;br&gt;• duration&lt;br&gt;• category" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="730" y="160" width="150" height="110" as="geometry" />
        </mxCell>
        
        <mxCell id="entity-room" value="&lt;b&gt;Room&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• room_no&lt;br&gt;• status" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="900" y="160" width="150" height="110" as="geometry" />
        </mxCell>
        
        <mxCell id="entity-category" value="&lt;b&gt;ServiceCategory&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• category_name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="1070" y="160" width="180" height="110" as="geometry" />
        </mxCell>
        
        <!-- Core Entities Row 2 -->
        <mxCell id="entity-classification" value="&lt;b&gt;ServiceClassification&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• class_name" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="220" y="290" width="180" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="entity-transitem" value="&lt;b&gt;TransactionItem&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• transaction_id&lt;br&gt;• service_id&lt;br&gt;• quantity&lt;br&gt;• price" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="430" y="290" width="180" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="entity-counter" value="&lt;b&gt;TransactionCounter&lt;/b&gt;&lt;br&gt;&lt;br&gt;• id&lt;br&gt;• next_number" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="640" y="290" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- Database Features Box -->
        <mxCell id="db-features" value="&lt;b&gt;Database Features&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Relational Integrity (Foreign Key Constraints)&lt;br&gt;• Row-Level Locking (Pessimistic Locking Strategy)&lt;br&gt;• ACID Transactions (Atomicity, Consistency, Isolation, Durability)&lt;br&gt;• Indexed Columns (Query Optimization)&lt;br&gt;• Connection Pooling (SQLAlchemy)&lt;br&gt;• Backup via phpMyAdmin/mysqldump" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;align=left;verticalAlign=top;strokeWidth=2;" vertex="1" parent="data-tier-box">
          <mxGeometry x="850" y="290" width="400" height="80" as="geometry" />
        </mxCell>
        
        <!-- Arrow from MySQL to entities -->
        <mxCell id="arrow-mysql-entities" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;strokeColor=#666666;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="data-tier-box" source="mysql-server" target="entity-transaction">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="650" y="150" />
              <mxPoint x="465" y="150" />
            </Array>
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
